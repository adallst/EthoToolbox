EthoToolbox
===========
Tools for running behavioral and neurophysiology experiments with PsychToolbox and Matlab



Data Organization
-----------------
A major goal of EthoToolbox is to provide a standard system for organizing data files of the sort generated by complex behavioral and neurophysiological experiments.

The following is in-progress brainstorming.

---

If we want to permit hierarchically organized tables, we need a convenient, unambiguous way to identify the foreign key.

Possibly:

* `parent/`
    * `parent.meta.data`: Identifies which columns are "exported" to children
    * `parent-entry-1/`
        * `parent-entry-1.row.data`
        * `child.data` or `child/`
    * `parent-entry-2/`
        * `parent-entry-2.row.data`
        * `child.data` or `child/`
    * `parent-entry-3/`
        * `parent-entry-3.row.data`
        * `child.data` or `child/`

---

Prefer a flat directory tree, but permit an "inheriting" structure as well.

* `{project}/`
    * `sourcedata/`
    * `derivatives/`

---

Three basic file types:

1. Tabular data
    * Can be a standard tabular data format
        * Should always have a column name header row
        * `.csv`, fields delimited by commas
        * `.csv2`, fields delimited by semicolons (European-style)
        * `.tsv`, fields delimited by single tab characters
        * `.wsv`, fields delimited by any whitespace sequence
        * `.table`, fields delimited by a comma, semicolon, or whitespace character, followed by zero or more whitespace characters. Note that strict csv, csv2, tsv, and wsv files are all valid table files as well.
    * Can be JSON or YAML
        * File should contain an array of dictionary objects, with each object representing a row in the table, and each field representing the column for that row.
2. Single-row "metadata"
    * Should have `.meta` before the normal file suffix (e.g., `.meta.csv`)
    * Can be a standard tabular data format
        * Should always have a column name header row
        * Any of the above file types is okay
        * Can be a standard table with only one row
        * Can be a table with two columns, `Field` and `Value`, with each row containing the data for one field
    * Can be JSON or YAML
        * File should contain one dictionary object
3. Content-agnostic "blob"
    * This file can be referred to, but its substructure is irrelevant to the EthoToolbox data organization.

---

* `datagroup.table`

or

* `datagroup/`
    * `datagroup.meta.json`
        ```
{
  "DirectoryRepresents": "ColumnName"
}
```

---

`subjects.table`:
```
SubjectID  Sex  Age  Weight
10101      M    12   12.3
10110      F    16   8.6
11000      O    1    NA
```

`sessions.table`:
```
SessionID  SubjectID  Date        TaskType
12         10101      2017-01-01  fast
13         11000      2017-01-02  fast
14         10101      2017-01-03  slow
```

OR

* `subjects/`
    * `subj-10101/`
        * `subj-10101.meta.table`:
            ```
Field      Value
SubjectID  10101
Sex        M
Age        12
Weight     12.3
            ```
        * `sessions.table`:
            ```
SessionID  Date        TaskType
12         2017-01-01  fast
14         2017-01-03  slow
            ```
    * `subj-10110/`
        * `subj-10110.meta.table`:
            ```
Field      Value
SubjectID  10110
Sex        F
Age        16
Weight     8.6
            ```
    * `subj-11000/`
        * `subj-11000.meta.table`:
            ```
Field      Value
SubjectID  11000
Sex        O
Age        1
            ```
        * `sessions.table`:
            ```
SessionID  Date        TaskType
13         2017-01-02  fast
            ```



---

* `{project}/`
    * `subjects.table`
        * `SubjectID`
        * Any additional relevant columns
    * `subjects/` (optional)
        * At most 1 table file per subject giving any multi-row data for the subject not covered elsewhere.
    * `sessions.table`
        * `SessionID`
        * `Date` (optional, omit for human subjects where privacy is a concern)
        * `StartTime` (optional)
        * Any additional relevant columns, such as per-session parameters.
    * `sessions/`
        * `blocks.table`
        * `blocks/`
    * `stimuli/` (optional)
